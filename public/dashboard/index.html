<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datapify - Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">ğŸ“Š Datapify</h1>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="chat">
          <span class="nav-icon">ğŸ’¬</span>
          <span class="nav-text">Conversaciones</span>
          <span class="badge" id="active-badge">0</span>
        </a>
        <a href="#" class="nav-item" data-page="analytics">
          <span class="nav-icon">ğŸ“ˆ</span>
          <span class="nav-text">Analytics</span>
        </a>
        <a href="#" class="nav-item" data-page="leads">
          <span class="nav-icon">ğŸ¯</span>
          <span class="nav-text">Leads</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <span class="nav-icon">âš™ï¸</span>
          <span class="nav-text">ConfiguraciÃ³n</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">I</div>
          <div class="user-details">
            <div class="user-name">Ignacio</div>
            <div class="user-role">Admin</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Page: Chat (Conversaciones) -->
      <div id="page-chat" class="page active">
        <div class="page-header">
          <div>
            <h2 class="page-title">Conversaciones</h2>
            <p class="page-subtitle">Gestiona las conversaciones de WhatsApp en tiempo real</p>
          </div>
          <div class="header-actions">
            <div class="search-box">
              <input type="text" id="search-input" placeholder="Buscar por telÃ©fono o nombre...">
            </div>
            <select id="filter-status" class="filter-select">
              <option value="">Todos los leads</option>
              <option value="shopify">ğŸ›ï¸ Con Shopify</option>
              <option value="scheduled">ğŸ“… Agendados</option>
              <option value="active">ğŸ’¬ Activos</option>
            </select>
          </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ’¬</div>
            <div class="stat-details">
              <div class="stat-label">Total Conversaciones</div>
              <div class="stat-value" id="stat-total">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ”¥</div>
            <div class="stat-details">
              <div class="stat-label">Hot Leads</div>
              <div class="stat-value" id="stat-hot">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-details">
              <div class="stat-label">Reuniones Agendadas</div>
              <div class="stat-value" id="stat-scheduled">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“Š</div>
            <div class="stat-details">
              <div class="stat-label">Tasa de ConversiÃ³n</div>
              <div class="stat-value" id="stat-conversion">0%</div>
            </div>
          </div>
        </div>

        <!-- Chat Layout -->
        <div class="chat-layout">
          <!-- Conversations List -->
          <div class="conversations-panel">
            <div class="conversations-header">
              <h3>Chats</h3>
              <button class="refresh-btn" id="refresh-btn">ğŸ”„</button>
            </div>
            <div class="conversations-list" id="conversations-list">
              <!-- Conversaciones se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
              <div class="loading">Cargando conversaciones...</div>
            </div>
          </div>

          <!-- Messages Panel -->
          <div class="messages-panel">
            <div class="messages-header" id="messages-header">
              <div class="empty-state">
                <p>ğŸ‘ˆ Selecciona una conversaciÃ³n para ver los mensajes</p>
              </div>
            </div>
            <div class="messages-container" id="messages-container">
              <!-- Mensajes se cargarÃ¡n aquÃ­ -->
            </div>
            <div class="conversation-info-panel" id="conversation-info">
              <!-- Info del lead se carga aquÃ­ -->
            </div>
          </div>
        </div>
      </div>

      <!-- Page: Analytics (placeholder) -->
      <div id="page-analytics" class="page">
        <div class="page-header">
          <h2 class="page-title">ğŸ“Š Funnel de ConversiÃ³n</h2>
          <p class="page-subtitle">AnÃ¡lisis completo del rendimiento de ventas por etapas</p>
        </div>

        <!-- Stats Overview -->
        <div class="stats-grid" style="margin-bottom: 30px;">
          <div class="stat-card">
            <div class="stat-icon">ğŸ’¬</div>
            <div class="stat-details">
              <div class="stat-label">Total Chats</div>
              <div class="stat-value" id="funnel-total-chats">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-details">
              <div class="stat-label">Agendaron</div>
              <div class="stat-value" id="funnel-scheduled">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ”„</div>
            <div class="stat-details">
              <div class="stat-label">En Trial</div>
              <div class="stat-value" id="funnel-trial">-</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-details">
              <div class="stat-label">Clientes Pagando</div>
              <div class="stat-value" id="funnel-paying">-</div>
            </div>
          </div>
        </div>

        <!-- Funnel Visualization -->
        <div class="funnel-container">
          <div class="funnel-stage" id="stage-1">
            <div class="funnel-stage-header">
              <span class="funnel-stage-number">1</span>
              <span class="funnel-stage-title">Chats Iniciados</span>
            </div>
            <div class="funnel-stage-body">
              <div class="funnel-stage-count" id="stage-1-count">-</div>
              <div class="funnel-stage-percentage">100%</div>
              <div class="funnel-stage-desc">Leads Ãºnicos que iniciaron conversaciÃ³n</div>
            </div>
          </div>

          <div class="funnel-arrow">â†“</div>
          <div class="funnel-conversion-rate" id="conversion-1-2">-</div>

          <div class="funnel-stage" id="stage-2">
            <div class="funnel-stage-header">
              <span class="funnel-stage-number">2</span>
              <span class="funnel-stage-title">Agendaron ReuniÃ³n</span>
            </div>
            <div class="funnel-stage-body">
              <div class="funnel-stage-count" id="stage-2-count">-</div>
              <div class="funnel-stage-percentage" id="stage-2-percentage">-</div>
              <div class="funnel-stage-desc">Leads que agendaron una reuniÃ³n</div>
            </div>
          </div>

          <div class="funnel-arrow">â†“</div>
          <div class="funnel-conversion-rate" id="conversion-2-3">-</div>

          <div class="funnel-split">
            <div class="funnel-stage funnel-stage-split" id="stage-3">
              <div class="funnel-stage-header">
                <span class="funnel-stage-number">3A</span>
                <span class="funnel-stage-title">Trial 14 DÃ­as</span>
              </div>
              <div class="funnel-stage-body">
                <div class="funnel-stage-count" id="stage-3-count">-</div>
                <div class="funnel-stage-percentage" id="stage-3-percentage">-</div>
                <div class="funnel-stage-desc">Empezaron periodo de prueba</div>
              </div>
            </div>

            <div class="funnel-stage funnel-stage-split" id="stage-4">
              <div class="funnel-stage-header">
                <span class="funnel-stage-number">3B</span>
                <span class="funnel-stage-title">Pago Directo + Bonos</span>
              </div>
              <div class="funnel-stage-body">
                <div class="funnel-stage-count" id="stage-4-count">-</div>
                <div class="funnel-stage-percentage" id="stage-4-percentage">-</div>
                <div class="funnel-stage-desc">Pagaron $199/mes sin trial</div>
              </div>
            </div>
          </div>

          <div class="funnel-arrow">â†“</div>
          <div class="funnel-conversion-rate" id="conversion-3-5">-</div>

          <div class="funnel-stage" id="stage-5">
            <div class="funnel-stage-header">
              <span class="funnel-stage-number">4</span>
              <span class="funnel-stage-title">Pagaron Post-Trial</span>
            </div>
            <div class="funnel-stage-body">
              <div class="funnel-stage-count" id="stage-5-count">-</div>
              <div class="funnel-stage-percentage" id="stage-5-percentage">-</div>
              <div class="funnel-stage-desc">Completaron trial y convirtieron</div>
            </div>
          </div>
        </div>

        <!-- Conversion Rates Summary -->
        <div class="conversion-summary">
          <h3 style="margin-bottom: 20px; color: #1a1a2e;">Tasas de ConversiÃ³n</h3>
          <div class="conversion-grid">
            <div class="conversion-card">
              <div class="conversion-label">Chat â†’ Agendamiento</div>
              <div class="conversion-value" id="rate-chat-schedule">-</div>
              <div class="conversion-desc" id="desc-chat-schedule">-</div>
            </div>
            <div class="conversion-card">
              <div class="conversion-label">Agendamiento â†’ ConversiÃ³n</div>
              <div class="conversion-value" id="rate-schedule-conversion">-</div>
              <div class="conversion-desc" id="desc-schedule-conversion">-</div>
            </div>
            <div class="conversion-card">
              <div class="conversion-label">Trial â†’ Pago</div>
              <div class="conversion-value" id="rate-trial-payment">-</div>
              <div class="conversion-desc" id="desc-trial-payment">-</div>
            </div>
            <div class="conversion-card">
              <div class="conversion-label">ConversiÃ³n Total</div>
              <div class="conversion-value highlight" id="rate-overall">-</div>
              <div class="conversion-desc" id="desc-overall">-</div>
            </div>
          </div>
        </div>

        <!-- Revenue Section -->
        <div class="revenue-section">
          <h3 style="margin-bottom: 20px; color: #1a1a2e;">ğŸ’° Revenue</h3>
          <div class="revenue-grid">
            <div class="revenue-card">
              <div class="revenue-label">Clientes Pagando</div>
              <div class="revenue-value" id="revenue-paying">-</div>
            </div>
            <div class="revenue-card">
              <div class="revenue-label">Revenue por Cliente</div>
              <div class="revenue-value" id="revenue-per-client">$199 USD</div>
            </div>
            <div class="revenue-card">
              <div class="revenue-label">Revenue Total</div>
              <div class="revenue-value highlight" id="revenue-total">-</div>
            </div>
            <div class="revenue-card">
              <div class="revenue-label">ProyecciÃ³n Mensual</div>
              <div class="revenue-value" id="revenue-monthly">-</div>
            </div>
          </div>
        </div>
      </div>
      <!-- Page: Leads -->
      <div id="page-leads" class="page">
        <div class="page-header">
          <div>
            <h2 class="page-title">GestiÃ³n de Leads</h2>
            <p class="page-subtitle">Administra y clasifica tus leads con estados de conversiÃ³n</p>
          </div>
          <div class="header-actions">
            <select id="filter-lead-shopify" class="filter-select">
              <option value="">Todos</option>
              <option value="true">ğŸ›ï¸ Solo con Shopify</option>
            </select>
            <select id="filter-lead-status" class="filter-select">
              <option value="all">Todos los estados</option>
              <option value="none">Sin conversiÃ³n</option>
              <option value="trial_14_days">ğŸ”„ Trial 14 dÃ­as</option>
              <option value="paid_monthly_bonus">ğŸ’° Mensual + Bonos</option>
              <option value="paid_after_trial">ğŸ’° PagÃ³ post-trial</option>
            </select>
          </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid" id="leads-stats">
          <!-- Se carga dinÃ¡micamente -->
        </div>

        <!-- Tabla de Leads -->
        <div class="leads-table-container">
          <div id="leads-table">
            <div class="loading">Cargando leads...</div>
          </div>
        </div>
      </div>

      <!-- Page: Settings (placeholder) -->
      <div id="page-settings" class="page">
        <div class="page-header">
          <h2 class="page-title">ConfiguraciÃ³n</h2>
          <p class="page-subtitle">PrÃ³ximamente...</p>
        </div>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
